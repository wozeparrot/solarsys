# monitor config
monitor=,preferred,auto,1

input {
    kb_layout=us
    repeat_rate=50
    repeat_delay=300
    follow_mouse=2
    force_no_accel=no

    touchpad {
        natural_scroll=no
        disable_while_typing=no
    }
    sensitivity=0
    accel_profile=adaptive
}

general {
    apply_sens_to_raw=no
    cursor_inactive_timeout=0

    gaps_in=5
    gaps_out=20
    border_size=1
    col.active_border=0xffc29dd5
    col.inactive_border=0xff6691d2

    layout=master
}

decoration {
    rounding=10

    blur {
        enabled=yes
        size=8
        passes=1
        new_optimizations=yes
    }

    drop_shadow=no
}

animations {
    enabled=1
    animation=windows,1,6,default
    animation=border,1,10,default
    animation=fade,1,10,default
    animation=workspaces,1,6,default
}

master {
    no_gaps_when_only=yes
    new_on_top=yes
    new_is_master=no
}

gestures {
    workspace_swipe=yes
    workspace_swipe_distance=400
    workspace_swipe_create_new=no
    workspace_swipe_forever=yes
}

misc {
    disable_hyprland_logo=yes
    disable_splash_rendering=yes
    disable_autoreload=yes
    vrr=1
}

binds {
    workspace_back_and_forth=no
    allow_workspace_cycles=no
}

# ---  window rules ---
windowrulev2=float,title:Picture-in-Picture

# --- mouse bindings ---
bindm=SUPER,mouse:272,movewindow
bindm=SUPER,mouse:273,resizewindow

# --- key bindings ---
# applications
bind=SUPER,Return,exec,kitty
bind=SUPER,B,exec,kitty ncmpcpp
bind=SUPER,V,exec,wl-clipmanager
bind=SUPER,D,exec,wl-launcher
bind=SUPER,C,exec,wl-calc
bind=SUPER,X,exec,wl-emoji
bind=SUPER,Z,exec,wl-colorpicker
bind=SUPER,space,exec,fnottctl dismiss
bind=,XF86Launch3,exec,wl-screenshot
bind=,Print,exec,wl-screenshot

# media controls
bind=,XF86AudioRaiseVolume,exec,pamixer -ui 5 && pamixer --get-volume > /tmp/wobpipe
bind=,XF86AudioLowerVolume,exec,pamixer -ud 5 && pamixer --get-volume > /tmp/wobpipe
bind=,XF86AudioMute,exec,pamixer -t && ( [ "$(pamixer --get-mute)" = "true" ] && echo 0 > /tmp/wobpipe ) || pamixer --get-volume > /tmp/wobpipe
bind=,XF86AudioPrev,exec,mpc prev
bind=,XF86AudioNext,exec,mpc next
bind=,XF86AudioPlay,exec,mpc toggle

# brightness controls
bind=,XF86MonBrightnessUp,exec,light -A 5 && light -G | cut -d. -f1 > /tmp/wobpipe
bind=,XF86MonBrightnessDown,exec,light -U 5 && light -G | cut -d. -f1 > /tmp/wobpipe

# window controls
bind=SUPER,Q,killactive
bind=SUPER,S,togglefloating,active
bind=SUPER,F,fullscreen,0
bind=SUPER,P,pin

# layout controls
bind=SUPER,J,cyclenext,prev
bind=SUPER,K,cyclenext
bind=SUPER,H,splitratio,-0.05
bind=SUPER,L,splitratio,0.05
bind=SUPER,M,layoutmsg,swapwithmaster

# monitor controls
bind=SUPER,comma,focusmonitor,l
bind=SUPER,period,focusmonitor,r
bind=SUPER_SHIFT,comma,movecurrentworkspacetomonitor,l
bind=SUPER_SHIFT,period,movecurrentworkspacetomonitor,r

# workspace controls
bind=SUPER,1,exec,hl-switchworkspacetoactivemonitor 1
bind=SUPER,2,exec,hl-switchworkspacetoactivemonitor 2
bind=SUPER,3,exec,hl-switchworkspacetoactivemonitor 3
bind=SUPER,4,exec,hl-switchworkspacetoactivemonitor 4
bind=SUPER,5,exec,hl-switchworkspacetoactivemonitor 5
bind=SUPER,6,exec,hl-switchworkspacetoactivemonitor 6
bind=SUPER,7,exec,hl-switchworkspacetoactivemonitor 7
bind=SUPER,8,exec,hl-switchworkspacetoactivemonitor 8
bind=SUPER,9,exec,hl-switchworkspacetoactivemonitor 9
bind=SUPER,0,exec,hl-switchworkspacetoactivemonitor 10

bind=SUPER_SHIFT,1,movetoworkspacesilent,1
bind=SUPER_SHIFT,2,movetoworkspacesilent,2
bind=SUPER_SHIFT,3,movetoworkspacesilent,3
bind=SUPER_SHIFT,4,movetoworkspacesilent,4
bind=SUPER_SHIFT,5,movetoworkspacesilent,5
bind=SUPER_SHIFT,6,movetoworkspacesilent,6
bind=SUPER_SHIFT,7,movetoworkspacesilent,7
bind=SUPER_SHIFT,8,movetoworkspacesilent,8
bind=SUPER_SHIFT,9,movetoworkspacesilent,9
bind=SUPER_SHIFT,0,movetoworkspacesilent,10

# passthrough
bind=SUPER,G,submap,clean
submap=clean
bind=SUPER,G,submap,reset
submap=reset

# startup stuff
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY DISPLAY HYPRLAND_INSTANCE_SIGNATURE DBUS_SESSION_BUS_ADDRESS XDG_SESSION_TYPE XDG_CURRENT_DESKTOP
exec-once=systemctl --user import-environment WAYLAND_DISPLAY DISPLAY HYPRLAND_INSTANCE_SIGNATURE DBUS_SESSION_BUS_ADDRESS XDG_SESSION_TYPE XDG_CURRENT_DESKTOP
exec-once=systemctl --user start graphical-session.target

exec-once=xrdb ~/.Xresources

exec-once=oguri&
exec-once=waybar&
exec-once=fnott&

exec-once=rm -f /tmp/wobpipe && mkfifo /tmp/wobpipe && tail -f /tmp/wobpipe | wob&

exec-once=systemctl --user restart mpdris2.service

exec-once=wl-paste --type text --watch cliphist store
exec-once=wl-paste --type image --watch cliphist store
