diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.c
index a2879d2b7c8e..4a9bbf0bde28 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.c
@@ -392,9 +392,6 @@ void amdgpu_amdkfd_free_gtt_mem(struct amdgpu_device *adev, void **mem_obj)
 {
    struct amdgpu_bo **bo = (struct amdgpu_bo **) mem_obj;
 
-   if (!bo || !*bo)
-       return;
-
    (void)amdgpu_bo_reserve(*bo, true);
    amdgpu_bo_kunmap(*bo);
    amdgpu_bo_unpin(*bo);
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_process_queue_manager.c b/drivers/gpu/drm/amd/amdkfd/kfd_process_queue_manager.c
index 7fbb5c274ccc..13b1f36b5535 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_process_queue_manager.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_process_queue_manager.c
@@ -279,17 +279,20 @@ static int init_user_queue(struct process_queue_manager *pqm,
        /* Starting with GFX11, wptr BOs must be mapped to GART for MES to determine work
         * on unmapped queues for usermode queue oversubscription (no aggregated doorbell)
         */
-       if (dev->adev != amdgpu_ttm_adev(q_properties->wptr_bo->tbo.bdev)) {
-           pr_err("Queue memory allocated to wrong device\n");
-           retval = -EINVAL;
-           goto free_gang_ctx_bo;
-       }
+       if (((dev->adev->mes.sched_version & AMDGPU_MES_API_VERSION_MASK)
+           >> AMDGPU_MES_API_VERSION_SHIFT) >= 2) {
+           if (dev->adev != amdgpu_ttm_adev(q_properties->wptr_bo->tbo.bdev)) {
+               pr_err("Queue memory allocated to wrong device\n");
+               retval = -EINVAL;
+               goto free_gang_ctx_bo;
+           }
 
-       retval = amdgpu_amdkfd_map_gtt_bo_to_gart(q_properties->wptr_bo,
-                             &(*q)->wptr_bo_gart);
-       if (retval) {
-           pr_err("Failed to map wptr bo to GART\n");
-           goto free_gang_ctx_bo;
+           retval = amdgpu_amdkfd_map_gtt_bo_to_gart(q_properties->wptr_bo,
+                                 &(*q)->wptr_bo_gart);
+           if (retval) {
+               pr_err("Failed to map wptr bo to GART\n");
+               goto free_gang_ctx_bo;
+           }
        }
    }
